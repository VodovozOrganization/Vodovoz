syntax = "proto3";
import "google/protobuf/timestamp.proto";

option csharp_namespace = "EarchiveApi";

package earchive;

service EarchiveUpd {
  rpc GetCounterparties (NameSubstring) returns (stream CounterpartyInfo);
  rpc GetAddresses (CounterpartyInfo) returns (stream DeliveryPointInfo);
  rpc GetUpdCode (UpdRequestInfo) returns (stream UpdResponseInfo);
  rpc GetUpdNumbers (OrderIdsInfo) returns (stream UpdNumberResponseInfo);
}

message NameSubstring{
	string namePart = 1;
}

message CounterpartyInfo{
	int64 id = 1;
	string name = 2;
}

message DeliveryPointInfo{
	int64 id = 1;
	string address = 2;
}

message UpdRequestInfo{
	int64 counterpartyId = 1;
	int64 deliveryPointId = 2;
	google.protobuf.Timestamp startDate = 3;
	google.protobuf.Timestamp endDate = 4;
}

message UpdResponseInfo{
	int64 id = 1;
}

message OrderIdsInfo {
  repeated int64 orderIds = 1;
}

message UpdNumberResponseInfo{
	int64 orderId = 1;
	string updNumber = 2;
}
